<div *ngIf="codeList"> 
    <nz-row nzGutter="16">
        <nz-col [nzLg]="24" [nzXl]="9" style="padding-bottom: 10px;">
            <nz-row  style="padding-bottom: 10px;">
                <nz-col>
                    <fs-edit-code [type]="'AddDefinition'" [settingGroups]="settingGroups"></fs-edit-code>
                </nz-col>
            </nz-row>
            <nz-row>
                <nz-col>
                    <ul nz-menu nzMode="inline">
                        <ul>
                            <li nz-menu-item nz-popover *ngFor="let item of codeList"
                                [nzPopoverTitle]="titleTemplate"
                                [nzPopoverContent]="contentTemplate"
                                nzPopoverPlacement="bottomRight" (click)="editManageAction(item)"
                            >
                                <nz-tag [nzColor]="'green'">{{ item.codes.no }}</nz-tag>
                                {{ item.codes.displayName }}
                                <ng-template #titleTemplate>
                                    <nz-row style="text-align: center;">
                                        <nz-col>
                                            <fs-edit-code [type]="'EditDefinition'" [data]="item" [settingGroups]="settingGroups"></fs-edit-code>
                                        </nz-col>
                                        <nz-col>
                                            <button nzType="link" nz-button (click)="setting(true, item.codes.id)">設定</button>
                                        </nz-col>
                                        <nz-col>
                                            <button nzType="link" style="color: red;" nz-button (click)="deleteNode(item, 'node')">刪除</button>
                                        </nz-col>
                                    </nz-row>
                                </ng-template>
                                <ng-template #contentTemplate>
                                    <nz-tag>{{ item.codes.id }}</nz-tag>
                                </ng-template>
                            </li>
                        </ul>
                    </ul>
                </nz-col>
            </nz-row>
        </nz-col>
        <nz-col [nzLg]="24" [nzXl]="15" *ngIf="selectedDefinition">
            <nz-card>
                <fs-detail [settingGroups]="settingGroups" [selectedDefinition]="selectedDefinition"></fs-detail>
            </nz-card>
        </nz-col>
    </nz-row>

    <fs-ng-alain-setting-management [(parameters)]="parameters"></fs-ng-alain-setting-management>
</div>
